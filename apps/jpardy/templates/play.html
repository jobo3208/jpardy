{% extends "base.html" %}

{% block title %}game #{{ game.pk }} | jpardy{% endblock %}

{% block content %}
<script src="{{ STATIC_URL }}js/jquery-1.7.1.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}js/csrf.js" type="text/javascript"></script>
<script type="text/javascript">
game = jQuery.parseJSON('{{ data|escapejs }}');
</script>
<script src="{{ STATIC_URL }}js/jpardy.js" type="text/javascript"></script>
<h2 class="underline">jpardy</h2>
<table id="score_board">
    <tr>
        {% for pig in game.playeringame_set.all %}
            <td>{{ pig.player.username }}</td>
            <td id="score{{ pig.pk }}" class="score">{{ pig.score }}</td>
        {% endfor %}
    </tr>
</table>
<table id="game_board">
    {% for cig in game.categoryingame_set.all %}
        <tr>
            <td>{{ cig.category.name }}</td>
            {% for qig in cig.questioningame_set.all %}
            <td><a class="board_question" 
                   onclick="selectQuestion(this, {{ qig.pk }});">{{ qig.question.value }}</a>
            </td>
            {% endfor %}
        </tr>
    {% endfor %}
</table>
<div id="question_area" style="width: 100%;">
    <h3><span id="header_category">No category</span> for <span id="header_value">no value</span></h3>
    <table>
        <tr>
            <td><strong>Question</strong></td>
            <td id="question" class="special">No question is selected.</td>
        </tr>
        <tr>
            <td><strong>Answer</strong></td>
            <td id="answer" class="special">No question is selected.</td>
        </tr>
        <tr>
            <td><strong>Who got it?</strong></td>
            <td class="special">
                <table id="answer_area">
                    {% for pig in game.playeringame_set.all %}
                        <tr>
                            <td style="width: 30%;">{{ pig.player.username }}</td>
                            <td style="width: 20px;"><button onclick="correct(this, {{ pig.pk }});" class="correct_button" /></td>
                            <td style="width: 20px;"><button onclick="incorrect(this, {{ pig.pk }});" class="incorrect_button" /></td>
                            <td></td>
                        </tr>
                    {% endfor %}
                </table>
            </td>
        </tr>
    </table>
    <button type="button" onclick="cancelCurrentQuestion();">Cancel</button>
    <button type="button" onclick="nobodyGotIt();">Nobody got it</button>
</div>
<div id="already_asked_area" style="width: 100%;">
    <h3><span id="header_category">No category</span> for <span id="header_value">no value</span></h3>
    <p>You already asked this question! Here's what happened:</p>
    <ul></ul>
    <button type="button" onclick="cancelAlreadyAskedQuestion();">Cancel</button>
    <button type="button" onclick="redoAlreadyAskedQuestion();">Redo</button>
</div>
<div id="ajax_status"></div>
{% endblock %}
